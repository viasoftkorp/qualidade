<vs-tabs-view-template *ngIf="loaded">
  <ng-container actions>
    <vs-button
      icon="save"
      type="save"
      label="NaoConformidades.Salvar"
      [disabled]="!canSave()"
      (clickEvent)="salvarNaoConformidade()"
    ></vs-button>
    <ng-container *ngIf="editorAction === editorActionEnum.Update">

      <vs-button
        *ngIf="canShowConcluirButton"
        icon="check-square"
        label="NaoConformidades.Concluir"
        (clickEvent)="concluir()"
      ></vs-button>

      <vs-button
        *ngIf="canShowEstornarConclusaoButton"
        icon="times-square"
        label="NaoConformidades.EstornarConclusao"
        (clickEvent)="estornarConclusao()"
      ></vs-button>

      <vs-button
        icon="print"
        label="NaoConformidades.Imprimir"
        (clickEvent)="imprimir()"></vs-button>

      <rnc-gerar-retrabalho-button
        [disabled]="disableGerarRetrabalhoButton"
        *ngIf="canShowGerarRetrabalhoButton">
      </rnc-gerar-retrabalho-button>
    </ng-container>
    <div fxFlex="auto" *ngIf="naoConformidadesEditorService.processando">
      <vs-spinner diameter="25"></vs-spinner>
    </div>
  </ng-container>

  <vs-layout>
    <div content>
      <vs-form>
        <form [formGroup]="form">
          <div class="field-container w-1/1">
            <vs-input
              [formControlName]="formControls.codigo"
              readonly
              placeholder="NaoConformidades.NaoConformidadesEditor.Codigo"
              class="w-1/8"
            >
            </vs-input>

            <vs-select
              *ngIf="naoConformidadesEditorService.naoConformidadeAtual.status !== statusNaoConformidade.Fechado"
              [formControlName]="formControls.status"
              placeholder="NaoConformidades.NaoConformidadesEditor.Status"
              [options]="statusOptions"
              class="w-1/8 margin-left-6"
            >
            </vs-select>

            <vs-select
              *ngIf="naoConformidadesEditorService.naoConformidadeAtual.status === statusNaoConformidade.Fechado"
              [formControlName]="formControls.status"
              placeholder="NaoConformidades.NaoConformidadesEditor.Status"
              class="w-1/8 margin-left-6"
              [options]="[{ name: statusNaoConformidade[2], value: statusNaoConformidade.Fechado }]"
              [disabled]="true"
            >
            </vs-select>

            <vs-select
              [formControlName]="formControls.origem"
              placeholder="NaoConformidades.NaoConformidadesEditor.Origem"
              [options]="origemOptions"
              [required]="true"
              class="w-2/8"
            >
            </vs-select>

            <rnc-notas-fiscais-entrada-autocomplete-select
              *ngIf="origem === origemNaoConformidadesEnum.InspecaoEntrada"
              [disabled]="!hasFornecedor"
              [required]="true"
              [formControlName]="formControls.idNotaFiscal"
              placeholder="NaoConformidades.NaoConformidadesEditor.NotaFiscal"
              [idFornecedor]="idPessoa"
              class="w-2/8"
            ></rnc-notas-fiscais-entrada-autocomplete-select>

            <rnc-notas-fiscais-saida-autocomplete-select
              *ngIf="origem !== origemNaoConformidadesEnum.InspecaoEntrada"
              [formControlName]="formControls.idNotaFiscal"
              placeholder="NaoConformidades.NaoConformidadesEditor.NotaFiscal"
              [idCliente]="idPessoa"
              class="w-2/8"
            ></rnc-notas-fiscais-saida-autocomplete-select>

            <qa-natureza-autocomplete-select
              [formControlName]="formControls.idNatureza"
              [required]="true"
              placeholder="NaoConformidades.NaoConformidadesEditor.Natureza"
              class="w-2/8"
            >
            </qa-natureza-autocomplete-select>
          </div>
          <div class="field-container w-1/1">
            <person-person-autocomplete-single
              *ngIf="origem !== origemNaoConformidadesEnum.InspecaoEntrada"
              [required]="origem == origemNaoConformidadesEnum.Cliente"
              [formControlName]="formControls.idPessoa"
              placeholder="NaoConformidades.NaoConformidadesEditor.Cliente"
              personType="Customer"
              (changedEvent)="pessoaAlterada($event)"
              class="w-1/4"
            ></person-person-autocomplete-single>

            <person-person-autocomplete-single
              *ngIf="origem === origemNaoConformidadesEnum.InspecaoEntrada"
              [required]="true"
              [formControlName]="formControls.idPessoa"
              placeholder="NaoConformidades.NaoConformidadesEditor.Fornecedor"
              personType="SupplierAndShippingCompany"
              (changedEvent)="pessoaAlterada($event)"
              class="w-1/4"
            ></person-person-autocomplete-single>

            <vs-input
              [required]="origem === origemNaoConformidadesEnum.InspecaoSaida"
              [formControlName]="formControls.numeroOdf"
              placeholder="NaoConformidades.NaoConformidadesEditor.Odf"
              (blurEvent)="odfPreenchido()"
              class="w-1/4"
              [mask]="mascaraCampoNumerico"
              [unmask]="true"
            ></vs-input>

            <qa-produto-autocomplete-select
              [formControlName]="formControls.idProduto"
              [required]="true"
              placeholder="NaoConformidades.NaoConformidadesEditor.Produto"
              class="w-1/4"
            >
            </qa-produto-autocomplete-select>

            <vs-input
              [formControlName]="formControls.numeroLote"
              type="string"
              placeholder="NaoConformidades.NaoConformidadesEditor.Lote"
              class="w-1/4"
            ></vs-input>
          </div>

          <div class="field-container w-1/1">
            <vs-datepicker
              [controlName]="formControls.dataFabricacaoLote"
              placeholder="NaoConformidades.NaoConformidadesEditor.DataFabricacao"
              class="w-2/8"
            >
            </vs-datepicker>

            <vs-input
              [formControlName]="formControls.campoNf"
              placeholder="NaoConformidades.NaoConformidadesEditor.CampoNf"
              class="w-2/8"
            ></vs-input>

            <vs-input
              [formControlName]="formControls.revisao"
              type="number"
              placeholder="NaoConformidades.NaoConformidadesEditor.Revisao"
              class="w-2/8"
            ></vs-input>

            <admin-user-autocomplete-select
              [formControlName]="formControls.idCriador"
              placeholder="NaoConformidades.NaoConformidadesEditor.UsuarioCriador"
              class="w-1/8"
              [disabled]="true"
            >
            </admin-user-autocomplete-select>

            <vs-datepicker
              [controlName]="formControls.dataCriacao"
              mode="day"
              [disabled]="true"
              placeholder="NaoConformidades.NaoConformidadesEditor.DataCriacao"
              class="w-1/8"
            ></vs-datepicker>
          </div>

          <div class="field-container w-1/1">
            <vs-textarea
              [formControlName]="formControls.equipe"
              placeholder="NaoConformidades.NaoConformidadesEditor.Equipe"
              rows="3"
              class="w-1/2"
            ></vs-textarea>

            <vs-textarea
              [formControlName]="formControls.descricao"
              rows="3"
              placeholder="NaoConformidades.NaoConformidadesEditor.Descricao"
              class="w-1/2"
            ></vs-textarea>
          </div>

          <div class="field-container w-1/1">
            <vs-checkbox
              [formControlName]="formControls.naoConformidadeEmPotencial"
              label="NaoConformidades.NaoConformidadesEditor.NaoConformidadeEmPotencial"
              class="w-1/4"
            ></vs-checkbox>

            <vs-checkbox
              [formControlName]="formControls.loteTotal"
              label="NaoConformidades.NaoConformidadesEditor.LoteTotal"
              class="w-1/4"
            ></vs-checkbox>

            <vs-checkbox
              [formControlName]="formControls.rejeitado"
              label="NaoConformidades.NaoConformidadesEditor.Rejeitado"
              class="w-1/4"
            ></vs-checkbox>

            <vs-checkbox
              [formControlName]="formControls.retrabalhoNoCliente"
              label="NaoConformidades.NaoConformidadesEditor.RetrabalhoNoCliente"
              class="w-1/4"
            ></vs-checkbox>
          </div>

          <div class="field-container w-1/1">
            <vs-checkbox
              [formControlName]="formControls.relatoNaoConformidade"
              label="NaoConformidades.NaoConformidadesEditor.RelatoNaoConformidade"
              class="w-1/4"
            ></vs-checkbox>

            <vs-checkbox
              [formControlName]="formControls.loteParcial"
              label="NaoConformidades.NaoConformidadesEditor.LoteParcial"
              class="w-1/4"
            ></vs-checkbox>

            <vs-checkbox
              [formControlName]="formControls.aceitoConcessao"
              label="NaoConformidades.NaoConformidadesEditor.AceitoConcessao"
              class="w-1/4"
            ></vs-checkbox>

            <vs-checkbox
              [formControlName]="formControls.retrabalhoPeloCliente"
              label="NaoConformidades.NaoConformidadesEditor.RetrabalhoPeloCliente"
              class="w-1/4"
            ></vs-checkbox>
          </div>

          <div class="field-container w-1/1">
            <vs-checkbox
              [formControlName]="formControls.melhoriaEmPotencial"
              label="NaoConformidades.NaoConformidadesEditor.MelhoriaEmPotencial"
              class="w-1/4"
            ></vs-checkbox>
            <span class="w-1/4"></span>
            <span class="w-1/4"></span>
            <span class="w-1/4"></span>
          </div>

          <div class="mat-tab-group">
            <mat-tab-group *ngIf="editorAction === editorActionEnum.Update">
              <mat-tab [label]="'NaoConformidades.NaoConformidadesEditor.Defeitos' | translate">
                <ng-template matTabContent>
                  <rnc-defeitos-nao-conformidades class="fix-grid-width"> </rnc-defeitos-nao-conformidades>
                </ng-template>
              </mat-tab>
              <mat-tab [label]="'NaoConformidades.NaoConformidadesEditor.Produtos' | translate">
                <ng-template matTabContent>
                  <rnc-produtos-nao-conformidades></rnc-produtos-nao-conformidades>
                </ng-template>
              </mat-tab>
              <mat-tab [label]="'NaoConformidades.NaoConformidadesEditor.Servicos' | translate">
                <ng-template matTabContent>
                  <rnc-servicos-nao-conformidades></rnc-servicos-nao-conformidades>
                </ng-template>
              </mat-tab>
              <mat-tab [label]="'NaoConformidades.NaoConformidadesEditor.Arquivos' | translate">
                <ng-template matTabContent>
                  <rnc-nao-conformidades-files [idNaoConformidade]="naoConformidadeId"></rnc-nao-conformidades-files>
                </ng-template>
              </mat-tab>
              <mat-tab [label]="'NaoConformidades.NaoConformidadesEditor.Reclamacao' | translate">
                <rnc-reclamacoes-nao-conformidades
                  [idNaoConformidade]="naoConformidadeId"
                  [naoConformidadesForm]="form"
                ></rnc-reclamacoes-nao-conformidades>
              </mat-tab>
              <mat-tab
                [label]="'NaoConformidades.NaoConformidadesEditor.PedidoVenda.Title' | translate"
                *ngIf="configuracaoGeral.utilizarReservaDePedidoNaLocalizacaoDeEstoque"
              >
                <ng-template matTabContent>
                  <rnc-pedido-venda-nao-conformidades></rnc-pedido-venda-nao-conformidades>
                </ng-template>
              </mat-tab>
              <mat-tab
                [label]="'NaoConformidades.NaoConformidadesEditor.Conclusao' | translate"
                *ngIf="naoConformidadesEditorService.naoConformidadeAtual.status === statusNaoConformidade.Fechado">
                <ng-template matTabContent>
                  <rnc-conclusao-nao-conformidades [idNaoConformidade]="naoConformidadeId"></rnc-conclusao-nao-conformidades>
                </ng-template>
              </mat-tab>
              <mat-tab
                [label]="'NaoConformidades.NaoConformidadesEditor.Retrabalho.OperacaoRetrabalho.Title' | translate"
                *ngIf="showOperacaoRetrabalho"
              >
                <ng-template matTabContent>
                  <rnc-operacao-retrabalho-nao-conformidades></rnc-operacao-retrabalho-nao-conformidades>
                </ng-template>
              </mat-tab>
              <mat-tab
                [label]="'NaoConformidades.NaoConformidadesEditor.Retrabalho.OrdemRetrabalho.Title' | translate"
                *ngIf="showOrdemRetrabalho"
              >
                <ng-template matTabContent>
                  <rnc-odf-retrabalho-nao-conformidades></rnc-odf-retrabalho-nao-conformidades>
                </ng-template>
              </mat-tab>
            </mat-tab-group>
          </div>
        </form>
      </vs-form>
    </div>
  </vs-layout>
</vs-tabs-view-template>
